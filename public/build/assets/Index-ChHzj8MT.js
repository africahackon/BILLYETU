import{r as p,u as I,w as A,s as q,c as z,o as f,a as r,i as h,l as j,d as s,b as l,f as v,t as i,k as w,y as N,F as W,m as X,e as n,g as G,M as H,z as k}from"./app-B-oWgorL.js";import{_ as J}from"./AuthenticatedLayout-DQmTMAKG.js";import{_ as P}from"./Modal-rL_D16Y4.js";import{_ as c}from"./InputLabel-Qc75SLBk.js";import{_ as C}from"./TextInput-CHdG8hXy.js";import{_ as K}from"./Pagination-DdDL4nx1.js";import{_ as Q}from"./TextArea-B-NnYSk7.js";import{_ as x}from"./InputError-DjJ0vloF.js";import{P as V}from"./PrimaryButton-JAsWR8mt.js";import{D as U}from"./DangerButton-C9Y_aHkz.js";import{S as R}from"./square-pen-_lVmGlS_.js";import{T as Y}from"./trash-2-DKGwXRhL.js";import{X as Z}from"./x-uGwhsB8G.js";import{S as ee}from"./save-BZYHDnm8.js";import{P as se}from"./plus-BYtNIQUl.js";import"./useTheme-BqXCrGo_.js";import"./users-UbsQP_5p.js";import"./createLucideIcon-676DDOdB.js";import"./clock-Ceb6M1qm.js";import"./circle-check-big-BLJy3Tqw.js";import"./triangle-alert-BrKQhPAh.js";import"./dollar-sign-DBGEH5tI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"flex justify-between items-center"},le={key:0,class:"mb-4 flex items-center justify-between bg-yellow-50 p-3 border border-yellow-200 rounded"},oe={class:"flex gap-2"},ae={class:"mt-6 bg-white shadow rounded-lg overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-gray-50"},re={class:"px-4 py-3"},ie={class:"divide-y divide-gray-100"},ue={class:"px-6 py-3"},me=["value"],pe={class:"px-4 py-2"},fe={class:"px-4 py-2"},ve={class:"px-4 py-2"},ce={class:"px-4 py-2"},xe=["onClick"],be={class:"px-4 py-2"},ge={class:"px-4 py-2 text-right flex gap-2 justify-end"},ye=["onClick"],_e=["onClick"],he={key:0},we={class:"p-6"},ke={class:"text-lg font-semibold mb-4"},Ce={class:"flex justify-end gap-3"},Ve={class:"p-6"},Se={class:"text-gray-700"},$e={class:"mt-4 text-right"},Re={__name:"Index",props:{leads:Object,Count:Object,filters:Object,Pagination:Object},setup(b){const S=b,u=p(!1),m=p(null),d=p([]),g=p(!1),$=p(""),o=I({name:"",phone_number:"",address:"",email_address:"",status:"new"});function D(){o.reset(),m.value=null,u.value=!0}function L(a){m.value=a.id,o.name=a.name,o.phone_number=a.phone_number,o.email_address=a.email_address,o.address=a.address,o.status=a.status||"new",u.value=!0}const y=p(!1);A(y,a=>{a?d.value=S.leads.data.map(e=>e.id):d.value=[]});const B=q(()=>S.leads.data.map(a=>a.id));A(d,a=>{y.value=a.length===B.value.length});function M(){m.value?o.put(route("tenants.leads.update",m.value),{onSuccess:()=>u.value=!1}):o.post(route("tenants.leads.store"),{onSuccess:()=>u.value=!1})}function E(a){confirm("Delete this lead?")&&k.delete(route("tenants.leads.destroy",a))}const F=()=>{d.value.length&&confirm("Are you sure you want to delete Leads?")&&k.delete(route("tenants.leads.bulk-delete"),{data:{ids:d.value},onSuccess:()=>{d.value=[],k.visit(route("tenants.leads.index"),{preserveScroll:!0})}})};function O(a,e=2){if(!a)return"";const t=a.split(" ");return t.length>e?t.slice(0,e).join(" ")+"…":a}function T(a){$.value=a,g.value=!0}return(a,e)=>(f(),z(J,null,{header:r(()=>[s("div",te,[e[12]||(e[12]=s("h2",{class:"text-xl font-bold"},"Leads",-1)),l(V,{onClick:D,class:"flex items-center gap-2"},{default:r(()=>[l(n(se),{class:"w-4 h-4"}),e[11]||(e[11]=v(" Add Lead ",-1))]),_:1})])]),default:r(()=>[d.value.length?(f(),h("div",le,[s("div",oe,[l(U,{onClick:F},{default:r(()=>[v("Delete ("+i(d.value.length)+")",1)]),_:1})])])):j("",!0),s("div",ae,[s("table",ne,[s("thead",de,[s("tr",null,[s("td",re,[w(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t)},null,512),[[N,y.value]])]),e[13]||(e[13]=s("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-600"},"Name",-1)),e[14]||(e[14]=s("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-600"},"Phone",-1)),e[15]||(e[15]=s("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-600"},"Email",-1)),e[16]||(e[16]=s("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-600"},"Address",-1)),e[17]||(e[17]=s("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-600"},"Status",-1)),e[18]||(e[18]=s("th",{class:"px-4 py-2 text-right text-xs font-semibold text-gray-600"},"Actions",-1))])]),s("tbody",ie,[(f(!0),h(W,null,X(b.leads.data,t=>(f(),h("tr",{key:t.id,class:"hover:bg-gray-50"},[s("td",ue,[w(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[1]||(e[1]=_=>d.value=_)},null,8,me),[[N,d.value]])]),s("td",pe,i(t.name),1),s("td",fe,i(t.phone_number),1),s("td",ve,i(t.email_address),1),s("td",ce,[s("span",{onClick:_=>T(t.address),class:"cursor-pointer text-green-600 hover:underline"},i(O(t.address,1)),9,xe)]),s("td",be,i(t.status||"—"),1),s("td",ge,[s("button",{onClick:_=>L(t),class:"text-blue-600 hover:underline"},[l(n(R),{class:"w-4 h-4"})],8,ye),s("button",{onClick:_=>E(t.id),class:"text-red-600 hover:underline"},[l(n(Y),{class:"w-4 h-4"})],8,_e)])]))),128)),b.leads.data.length===0?(f(),h("tr",he,[...e[19]||(e[19]=[s("td",{colspan:"6",class:"text-center text-sm text-gray-500 py-6"},"No leads found.",-1)])])):j("",!0)])])]),l(K,{links:b.leads.links},null,8,["links"]),l(P,{show:u.value,onClose:e[8]||(e[8]=t=>u.value=!1)},{default:r(()=>[s("div",we,[s("h2",ke,i(m.value?"Edit Lead":"Create Lead"),1),s("form",{onSubmit:G(M,["prevent"]),class:"space-y-4"},[s("div",null,[l(c,{for:"name",value:"Full Name"}),l(C,{id:"name",modelValue:n(o).name,"onUpdate:modelValue":e[2]||(e[2]=t=>n(o).name=t),class:"mt-1 block w-full"},null,8,["modelValue"]),l(x,{message:n(o).errors.name,class:"mt-1"},null,8,["message"])]),s("div",null,[l(c,{for:"phone",value:"Phone Number"}),l(C,{id:"contact",modelValue:n(o).phone_number,"onUpdate:modelValue":e[3]||(e[3]=t=>n(o).phone_number=t),class:"mt-1 block w-full"},null,8,["modelValue"]),l(x,{message:n(o).errors.phone_number,class:"mt-1"},null,8,["message"])]),s("div",null,[l(c,{for:"email_address",value:"Email Address (optional)"}),l(C,{id:"email",modelValue:n(o).email_address,"onUpdate:modelValue":e[4]||(e[4]=t=>n(o).email_address=t),class:"mt-1 block w-full"},null,8,["modelValue"]),l(x,{message:n(o).errors.email_address,class:"mt-1"},null,8,["message"])]),s("div",null,[l(c,{for:"address",value:"Address"}),l(Q,{id:"address",modelValue:n(o).address,"onUpdate:modelValue":e[5]||(e[5]=t=>n(o).address=t),rows:"2",class:"mt-1 block w-full"},null,8,["modelValue"]),l(x,{message:n(o).errors.address,class:"mt-1"},null,8,["message"])]),s("div",null,[l(c,{for:"status",value:"Status"}),w(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>n(o).status=t),id:"status",class:"mt-1 block w-full border-gray-300 rounded-md"},[...e[20]||(e[20]=[s("option",{class:"text-red-500",value:"new"},"New",-1),s("option",{class:"text-amber-500",value:"contacted"},"Contacted",-1),s("option",{class:"text-green-600",value:"converted"},"Converted",-1)])],512),[[H,n(o).status]]),l(x,{message:n(o).errors.status,class:"mt-1"},null,8,["message"])]),s("div",Ce,[l(U,{type:"button",onClick:e[7]||(e[7]=t=>u.value=!1)},{default:r(()=>[l(n(Z),{class:"w-4 h-4 mr-1"}),e[21]||(e[21]=v(" Cancel ",-1))]),_:1}),l(V,{disabled:n(o).processing},{default:r(()=>[l(n(ee),{class:"w-4 h-4 mr-1"}),v(" "+i(m.value?"Update":"Save"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),l(P,{show:g.value,onClose:e[10]||(e[10]=t=>g.value=!1)},{default:r(()=>[s("div",Ve,[e[23]||(e[23]=s("h2",{class:"text-lg font-semibold mb-4"},"Full Address",-1)),s("p",Se,i($.value),1),s("div",$e,[l(V,{onClick:e[9]||(e[9]=t=>g.value=!1)},{default:r(()=>[...e[22]||(e[22]=[v("Close",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1}))}};export{Re as default};
