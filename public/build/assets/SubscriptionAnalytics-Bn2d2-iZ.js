import{c as v,o as i,a as k,b as a,d as t,e as n,h as S,f as c,i as r,t as l,F as p,m as g,n as A}from"./app-DQ1vlaC4.js";import{_ as C}from"./SuperAdminLayout-CGci2Pif.js";import{_ as u}from"./Card-BRVYY5Vw.js";import{T as M,_ as R}from"./ChartCard-C1rRZGsW.js";import{c as m}from"./createLucideIcon-B_z4RiSM.js";import{U as f,A as E}from"./users-DRAMVCud.js";import{C as h}from"./circle-check-big-DsdPW5IB.js";import{D as N}from"./dollar-sign-D5yBrcRU.js";import{T}from"./triangle-alert-k_4De6-w.js";import{C as j}from"./clock-BGYHf9J1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./credit-card-BVTsYoBt.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=m("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=m("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=m("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=m("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),z={class:"p-6 space-y-6"},B={class:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg p-6 text-white"},P={class:"flex items-center justify-between"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},U={class:"bg-white rounded-xl shadow-lg p-6"},$={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center"},F={class:"bg-white rounded-xl shadow-lg p-6"},I={class:"flex items-center justify-between mb-4"},K={class:"text-xl font-semibold text-gray-900 flex items-center"},q={class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium"},H={key:0,class:"space-y-3"},O={class:"flex items-center space-x-3"},G={class:"font-medium text-gray-900"},J={class:"text-sm text-gray-600"},Q={class:"text-right"},W={class:"text-sm font-medium text-yellow-800"},X={class:"text-xs text-gray-500"},Y={key:1,class:"text-center py-8 text-gray-500"},Z={class:"bg-white rounded-xl shadow-lg p-6"},tt={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center"},et={key:0,class:"space-y-3"},st={class:"flex items-center space-x-3"},at={class:"font-medium text-gray-900"},nt={class:"text-sm text-gray-600"},lt={class:"text-right"},ot={class:"text-sm font-medium text-green-800"},it={class:"text-xs text-gray-500"},rt={key:1,class:"text-center py-8 text-gray-500"},dt={class:"bg-white rounded-xl shadow-lg p-6"},ct={class:"text-xl font-semibold text-gray-900 mb-4 flex items-center"},xt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm font-medium text-gray-900"},gt={class:"text-sm text-gray-500"},ht={class:"px-6 py-4 whitespace-nowrap"},ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"flex justify-end space-x-4"},kt={class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center"},St={class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center"},Pt={__name:"SubscriptionAnalytics",props:{analytics:Object,monthlyRevenue:Number,conversionRate:Number,endingSoon:Array,recentRenewals:Array,subscriptions:Array},setup(o){const y=d=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(d),x=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",w=d=>{switch(d){case"trial":return"text-blue-600 bg-blue-100";case"active":return"text-green-600 bg-green-100";case"expired":return"text-red-600 bg-red-100";case"past_due":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return(d,s)=>(i(),v(C,null,{default:k(()=>[a(n(S),{title:"Subscription Analytics"}),t("div",z,[t("div",B,[t("div",P,[s[0]||(s[0]=t("div",null,[t("h1",{class:"text-3xl font-bold mb-2"},"Subscription Analytics"),t("p",{class:"text-purple-100"},"Monitor and manage all tenant subscriptions")],-1)),a(n(D),{class:"w-16 h-16 text-white/70"})])]),t("div",V,[a(u,{title:"Total Subscriptions",value:o.analytics.total,icon:n(f),class:"bg-gradient-to-r from-blue-50 to-blue-100"},null,8,["value","icon"]),a(u,{title:"Active Subscriptions",value:o.analytics.active,icon:n(h),class:"bg-gradient-to-r from-green-50 to-green-100"},null,8,["value","icon"]),a(u,{title:"Monthly Revenue",value:y(o.monthlyRevenue),icon:n(N),class:"bg-gradient-to-r from-yellow-50 to-yellow-100"},null,8,["value","icon"]),a(u,{title:"Conversion Rate",value:`${o.conversionRate}%`,icon:n(M),class:"bg-gradient-to-r from-purple-50 to-purple-100"},null,8,["value","icon"])]),t("div",U,[t("h2",$,[a(n(_),{class:"w-5 h-5 mr-2 text-blue-600"}),s[1]||(s[1]=c(" Subscription Status Distribution ",-1))]),a(R,{title:"",labels:["Active","Trial","Expired","Past Due"],values:[o.analytics.active,o.analytics.trial,o.analytics.expired,0],type:"donut",icon:n(_),class:"h-64"},null,8,["values","icon"])]),t("div",F,[t("div",I,[t("h2",K,[a(n(T),{class:"w-5 h-5 mr-2 text-yellow-600"}),s[2]||(s[2]=c(" Subscriptions Ending Soon (7 days) ",-1))]),t("span",q,l(o.endingSoon.length)+" subscriptions ",1)]),o.endingSoon.length>0?(i(),r("div",H,[(i(!0),r(p,null,g(o.endingSoon,e=>(i(),r("div",{key:e.id,class:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200"},[t("div",O,[a(n(j),{class:"w-5 h-5 text-yellow-600"}),t("div",null,[t("p",G,l(e.tenant.business_name),1),t("p",J,l(e.tenant.email),1)])]),t("div",Q,[t("p",W,l(e.current_period_days_remaining)+" days left ",1),t("p",X," Ends: "+l(x(e.current_period_ends_at)),1)])]))),128))])):(i(),r("div",Y,[a(n(h),{class:"w-12 h-12 mx-auto mb-2 text-green-500"}),s[3]||(s[3]=t("p",null,"No subscriptions ending soon",-1))]))]),t("div",Z,[t("h2",tt,[a(n(b),{class:"w-5 h-5 mr-2 text-green-600"}),s[4]||(s[4]=c(" Recent Renewals (Last 30 days) ",-1))]),o.recentRenewals.length>0?(i(),r("div",et,[(i(!0),r(p,null,g(o.recentRenewals,e=>(i(),r("div",{key:e.id,class:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200"},[t("div",st,[a(n(h),{class:"w-5 h-5 text-green-600"}),t("div",null,[t("p",at,l(e.tenant.business_name),1),t("p",nt,l(e.tenant.email),1)])]),t("div",lt,[t("p",ot,l(y(e.amount)),1),t("p",it,l(x(e.last_payment_at)),1)])]))),128))])):(i(),r("div",rt,[a(n(E),{class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s[5]||(s[5]=t("p",null,"No recent renewals",-1))]))]),t("div",dt,[t("h2",ct,[a(n(f),{class:"w-5 h-5 mr-2 text-blue-600"}),s[6]||(s[6]=c(" All Subscriptions ",-1))]),t("div",xt,[t("table",ut,[s[7]||(s[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tenant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trial Ends"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Period Ends"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Last Payment")])],-1)),t("tbody",mt,[(i(!0),r(p,null,g(o.subscriptions,e=>(i(),r("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",yt,[t("div",null,[t("div",pt,l(e.tenant_name),1),t("div",gt,l(e.tenant_id),1)])]),t("td",ht,[t("span",{class:A(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",w(e.status)])},l(e.status),3)]),t("td",ft,l(y(e.amount)),1),t("td",_t,l(x(e.trial_ends_at)),1),t("td",bt,l(x(e.current_period_ends_at)),1),t("td",wt,l(x(e.last_payment_at)),1)]))),128))])])])]),t("div",vt,[t("button",kt,[a(n(L),{class:"w-4 h-4 mr-2"}),s[8]||(s[8]=c(" Send Reminders ",-1))]),t("button",St,[a(n(b),{class:"w-4 h-4 mr-2"}),s[9]||(s[9]=c(" Process Expired ",-1))])])])]),_:1}))}};export{Pt as default};
