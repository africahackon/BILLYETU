import{B,r as y,u as P,E as K,w as L,i,o as r,d as t,D as C,k as d,b as I,M as G,e as a,a as w,l as u,F as _,v as c,f as k,t as v,n as N,T as F,z as T}from"./app-ClLsTfBs.js";import"./index-Ce2R2weR.js";import{_ as $}from"./Modal-np3oSQXU.js";const H={class:"flex justify-center items-center min-h-[60vh] bg-gradient-to-br from-blue-50 to-indigo-100 animate-fade-in"},O={class:"w-full max-w-lg bg-white rounded-xl shadow-lg p-8 border border-indigo-100"},q={key:0,class:"space-y-4"},z={class:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-6 shadow space-y-4"},R={class:"flex items-center gap-2"},X={class:"px-2 py-1 rounded bg-indigo-100 text-indigo-700 font-bold text-sm flex items-center gap-1"},W={key:0,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},J={key:0,class:"flex items-center gap-2"},Q={class:"px-2 py-1 rounded bg-blue-100 text-blue-700 text-sm"},Y={key:1,class:"flex items-center gap-2"},Z={class:"px-2 py-1 rounded bg-gray-100 text-gray-700 text-sm"},ee={key:2,class:"flex items-center gap-2"},te={class:"px-2 py-1 rounded bg-green-100 text-green-700 text-sm"},se={key:3,class:"flex items-center gap-2"},oe={class:"px-2 py-1 rounded bg-yellow-100 text-yellow-700 text-sm"},le={key:4,class:"flex items-center gap-2"},ae={class:"px-2 py-1 rounded bg-red-100 text-red-700 text-sm"},ne={class:"flex items-center gap-2"},ie={key:0,class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},re={class:"flex justify-end mt-4"},ce={__name:"SmsGateway",props:{gateways:{type:Array,default:()=>[]}},setup(j){const m=B(),b={position:"top-right",timeout:4e3,closeOnClick:!0,pauseOnHover:!0,maxToasts:1},p=j,D=y(!1),S=y(!1),f=y(!1),n=y({});async function V(){try{const l=await fetch("/tenants/settings/sms-gateway/json",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(l.ok){const o=(await l.json()).props?.gateways?.[0]||g;n.value={...o}}else n.value=p.gateways[0]?{...p.gateways[0]}:{...g}}catch{n.value=p.gateways[0]?{...p.gateways[0]}:{...g}}f.value=!0}const g={id:"default-talksasa",provider:"talksasa",label:"TALKSASA (Default)",is_active:!0,username:"",sender_id:"",webhook_url:"",status_callback_url:"",region:"",custom_parameters:{},api_key:"",api_secret:"",is_default:!0},s=P({id:"",provider:"",api_key:"",api_secret:"",username:"",sender_id:"",webhook_url:"",status_callback_url:"",region:"",custom_parameters:{},label:"",is_active:!1});function x(l){s.id=l.id||null,s.provider=l.provider||"",s.api_key=l.api_key||"",s.api_secret=l.api_secret||"",s.username=l.username||"",s.sender_id=l.sender_id||"",s.webhook_url=l.webhook_url||"",s.status_callback_url=l.status_callback_url||"",s.region=l.region||"",s.custom_parameters=l.custom_parameters||{},s.label=l.label||"",s.is_active=typeof l.is_active=="boolean"?l.is_active:!1}K(()=>{p.gateways.length>0?x(p.gateways[0]):x(g)}),L(()=>s.provider,l=>{const e=p.gateways.find(o=>o.provider===l);e&&x(e)});const E=()=>{const e={talksasa:"TALKSASA",africastalking:"Africa's Talking",twilio:"Twilio",custom:"Custom"}[s.provider]||s.provider,o=m.info(`Saving SMS gateway settings for ${e}...`,{...b,timeout:2e3}),h=M=>{D.value=!1,m.dismiss(o),S.value?m.success(`Successfully updated SMS gateway: ${e}.`,b):m.success(`Added new SMS gateway: ${e}.`,b)},A=M=>{m.dismiss(o);const U=Object.values(M).flat().join(" ");m.error(U||"Failed to update SMS gateway.",{...b,timeout:7e3})};S.value?T.put(route("tenants.settings.sms_gateway.update"),s,{onSuccess:h,onError:A}):T.post(route("tenants.settings.sms_gateway.update"),s,{onSuccess:h,onError:A})};return(l,e)=>(r(),i("div",H,[t("div",O,[e[30]||(e[30]=C('<div class="flex items-center mb-6"><svg class="w-8 h-8 text-indigo-500 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8h2a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8a2 2 0 012-2h2"></path><rect width="12" height="8" x="6" y="4" rx="2"></rect><path stroke-linecap="round" stroke-linejoin="round" d="M6 12h.01M6 16h.01"></path></svg><h3 class="text-2xl font-bold text-indigo-700">SMS Gateway Selection</h3></div><label class="block font-semibold mb-2 text-indigo-600">Select SMS Gateway</label>',2)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).provider=o),class:"input input-bordered w-full mb-6 focus:ring-2 focus:ring-indigo-400"},[...e[10]||(e[10]=[C('<option value="talksasa">TALKSASA (Default)</option><option value="bytewave">Bytewave</option><option value="africastalking">Africa&#39;s Talking</option><option value="textsms">TextSMS</option><option value="mobitech">Mobitech</option><option value="twilio">Twilio</option><option value="custom">Custom</option>',7)])],512),[[G,a(s).provider]]),I(F,{name:"fade"},{default:w(()=>[a(s).provider?(r(),i("div",q,[["talksasa","bytewave"].includes(a(s).provider)?(r(),i(_,{key:0},[t("div",null,[e[11]||(e[11]=t("label",{class:"block font-semibold text-gray-700"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).api_key=o),class:"input input-bordered w-full",type:"password",autocomplete:"new-password",placeholder:"Enter API Key"},null,512),[[c,a(s).api_key]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block font-semibold text-gray-700"},"Sender ID",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a(s).sender_id=o),class:"input input-bordered w-full",type:"text",placeholder:"Enter Sender ID"},null,512),[[c,a(s).sender_id]])])],64)):["africastalking","textsms","mobitech"].includes(a(s).provider)?(r(),i(_,{key:1},[t("div",null,[e[13]||(e[13]=t("label",{class:"block font-semibold text-gray-700"},"Username",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>a(s).username=o),class:"input input-bordered w-full",type:"text",placeholder:"Enter Username"},null,512),[[c,a(s).username]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block font-semibold text-gray-700"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>a(s).api_key=o),class:"input input-bordered w-full",type:"password",autocomplete:"new-password",placeholder:"Enter API Key"},null,512),[[c,a(s).api_key]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block font-semibold text-gray-700"},"Sender ID",-1)),d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>a(s).sender_id=o),class:"input input-bordered w-full",type:"text",placeholder:"Enter Sender ID"},null,512),[[c,a(s).sender_id]])])],64)):(r(),i(_,{key:2},[t("div",null,[e[16]||(e[16]=t("label",{class:"block font-semibold text-gray-700"},"API Key",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>a(s).api_key=o),class:"input input-bordered w-full",type:"password",autocomplete:"new-password",placeholder:"Enter API Key"},null,512),[[c,a(s).api_key]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block font-semibold text-gray-700"},"API Secret",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>a(s).api_secret=o),class:"input input-bordered w-full",type:"password",autocomplete:"new-password",placeholder:"Enter API Secret"},null,512),[[c,a(s).api_secret]])])],64)),t("div",{class:"flex justify-between mt-6"},[t("button",{class:"btn btn-outline btn-info mr-2",type:"button",onClick:V}," Show Details "),t("button",{class:"btn btn-indigo btn-lg shadow transition hover:scale-105",type:"button",onClick:E},[...e[18]||(e[18]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1),k(" Save Gateway ",-1)])])]),I($,{show:f.value,onClose:e[9]||(e[9]=o=>f.value=!1)},{header:w(()=>[...e[19]||(e[19]=[t("div",{class:"flex items-center gap-3"},[t("svg",{class:"w-7 h-7 text-indigo-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 8h2a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8a2 2 0 012-2h2"}),t("rect",{width:"12",height:"8",x:"6",y:"4",rx:"2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12h.01M6 16h.01"})]),t("h3",{class:"text-xl font-bold text-indigo-700"},"Current SMS Gateway Details")],-1)])]),footer:w(()=>[t("div",re,[t("button",{class:"btn btn-outline btn-lg",onClick:e[8]||(e[8]=o=>f.value=!1)},[...e[29]||(e[29]=[t("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),k(" Close ",-1)])])])]),default:w(()=>[t("div",z,[t("div",R,[e[21]||(e[21]=t("span",{class:"font-semibold text-gray-700"},"Provider:",-1)),t("span",X,[n.value.provider==="talksasa"?(r(),i("svg",W,[...e[20]||(e[20]=[t("circle",{cx:"10",cy:"10",r:"10"},null,-1)])])):u("",!0),k(" "+v(n.value.provider?.toUpperCase()||"N/A"),1)])]),n.value.label?(r(),i("div",J,[e[22]||(e[22]=t("span",{class:"font-semibold text-gray-700"},"Label:",-1)),t("span",Q,v(n.value.label),1)])):u("",!0),n.value.username?(r(),i("div",Y,[e[23]||(e[23]=t("span",{class:"font-semibold text-gray-700"},"Username:",-1)),t("span",Z,v(n.value.username),1)])):u("",!0),n.value.api_key?(r(),i("div",ee,[e[24]||(e[24]=t("span",{class:"font-semibold text-gray-700"},"API Key:",-1)),t("span",te,v(n.value.api_key),1)])):u("",!0),n.value.sender_id?(r(),i("div",se,[e[25]||(e[25]=t("span",{class:"font-semibold text-gray-700"},"Sender ID:",-1)),t("span",oe,v(n.value.sender_id),1)])):u("",!0),n.value.api_secret?(r(),i("div",le,[e[26]||(e[26]=t("span",{class:"font-semibold text-gray-700"},"API Secret:",-1)),t("span",ae,v(n.value.api_secret),1)])):u("",!0),t("div",ne,[e[28]||(e[28]=t("span",{class:"font-semibold text-gray-700"},"Active:",-1)),t("span",{class:N([n.value.is_active?"bg-green-200 text-green-800":"bg-gray-200 text-gray-600","px-2 py-1 rounded font-bold text-sm"])},[n.value.is_active?(r(),i("svg",ie,[...e[27]||(e[27]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):u("",!0),k(" "+v(n.value.is_active?"Active":"Inactive"),1)],2)])])]),_:1},8,["show"])])):u("",!0)]),_:1})])]))}};export{ce as default};
