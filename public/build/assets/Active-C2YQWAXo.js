import{r as k,i as r,o as n,b as m,e as w,h as U,a as C,d as e,l as x,F as b,m as E,t as a,n as $,f as d,k as c,v as u,z as v}from"./app-oFFNXrwF.js";import{_ as A}from"./SuperAdminLayout-DOAy_mLy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./users-BrXl4J5B.js";import"./createLucideIcon-_v3494oq.js";import"./dollar-sign-CqZmt_ZI.js";import"./credit-card-DCysjNCl.js";const N={class:"max-w-6xl mx-auto p-6 bg-white rounded shadow"},V={class:"w-full text-sm border"},D={class:"border px-4 py-2"},S={class:"border px-4 py-2"},T={class:"border px-4 py-2"},M={class:"border px-4 py-2"},z={class:"border px-4 py-2"},B={class:"border px-4 py-2"},j={class:"border px-4 py-2"},F=["onClick"],L=["onClick"],R={key:0,class:"text-center text-gray-500 py-6"},q={key:0,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},G={class:"bg-white p-6 rounded shadow max-w-md w-full space-y-4"},H={class:"block"},I={class:"block"},J={class:"block"},K={class:"flex justify-end space-x-2 pt-4"},ee={__name:"Active",props:{activeUsers:Array},setup(_){const p=_,l=k(null);function f(o){if(o<=0)return"Expired";const t=Math.floor(o/(3600*24)),s=Math.floor(o%(3600*24)/3600),i=Math.floor(o%3600/60);return`${t}d ${s}h ${i}m`}function y(o){l.value={...o}}function h(){const{id:o}=l.value;v.put(`/admin/active-users/${o}`,l.value,{onSuccess:()=>{l.value=null},onError:t=>{console.error(t)}})}function g(o){confirm(`Delete user ${o.name}?`)&&v.delete(`/admin/active-users/${o.id}`,{onSuccess:()=>console.log("Deleted")})}return(o,t)=>(n(),r(b,null,[m(w(U),{title:"Active Users"}),m(A,null,{default:C(()=>[e("div",N,[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold mb-4"},"Active Users",-1)),e("table",V,[t[4]||(t[4]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Tenant"),e("th",{class:"px-4 py-2 border"},"Name"),e("th",{class:"px-4 py-2 border"},"Email"),e("th",{class:"px-4 py-2 border"},"Trial Expires"),e("th",{class:"px-4 py-2 border"},"Remaining"),e("th",{class:"px-4 py-2 border"},"Status"),e("th",{class:"px-4 py-2 border"},"Actions")])],-1)),e("tbody",null,[(n(!0),r(b,null,E(p.activeUsers,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",D,a(s.tenant_name),1),e("td",S,a(s.name),1),e("td",T,a(s.email),1),e("td",M,a(s.trial_expires_at),1),e("td",z,a(f(s.trial_remaining_seconds)),1),e("td",B,[e("span",{class:$(s.is_trial_active?"text-green-600":"text-red-600")},a(s.is_trial_active?"Active":"Expired"),3)]),e("td",j,[e("button",{onClick:i=>y(s),class:"text-blue-600 hover:underline"},"Edit",8,F),e("button",{onClick:i=>g(s),class:"text-red-600 hover:underline ml-2"},"Delete",8,L)])]))),128))])]),p.activeUsers.length?x("",!0):(n(),r("div",R,"No users found."))]),l.value?(n(),r("div",q,[e("div",G,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold"},"Edit User",-1)),e("label",H,[t[6]||(t[6]=d(" Name: ",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.name=s),class:"w-full mt-1 p-2 border rounded"},null,512),[[u,l.value.name]])]),e("label",I,[t[7]||(t[7]=d(" Email: ",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.email=s),class:"w-full mt-1 p-2 border rounded"},null,512),[[u,l.value.email]])]),e("label",J,[t[8]||(t[8]=d(" Trial Expires At: ",-1)),c(e("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.trial_expires_at=s),class:"w-full mt-1 p-2 border rounded"},null,512),[[u,l.value.trial_expires_at]])]),e("div",K,[e("button",{onClick:t[3]||(t[3]=s=>l.value=null),class:"text-gray-600 hover:underline"},"Cancel"),e("button",{onClick:h,class:"text-blue-600 hover:underline font-bold"},"Save")])])])):x("",!0)]),_:1})],64))}};export{ee as default};
