import{B as T,r as x,u as A,w as C,c as O,o as c,a as f,i as g,l as k,d as t,b as a,f as v,t as d,k as h,y as U,F as L,m as W,e as o,g as z,M as D,z as P}from"./app-oFFNXrwF.js";import{_ as H}from"./AuthenticatedLayout-Dj8sUn9s.js";import{_ as K}from"./Modal-BU_XZGk6.js";import{_ as r}from"./InputLabel-BMpjnUmJ.js";import{_ as y}from"./TextInput-DEQlec4e.js";import{P as M}from"./PrimaryButton-D8upnlpu.js";import{D as $}from"./DangerButton-MIuPCQsN.js";import{_ as u}from"./InputError-D-R-jII7.js";import{_ as q}from"./Pagination-DVyaJJmb.js";import{S as I}from"./square-pen-B7YPeSbk.js";import{T as X}from"./trash-2-DgycJ3-v.js";import{X as G}from"./x-EuxA9Ubv.js";import{S as J}from"./save-Bb7m2OEQ.js";import{W as Q}from"./wifi-CKAYFUTq.js";import{P as R}from"./plus-C21egxkK.js";import"./useTheme-BwohV4UC.js";import"./users-BrXl4J5B.js";import"./createLucideIcon-_v3494oq.js";import"./clock-CiOmFUsj.js";import"./circle-check-big-CF-WQiIv.js";import"./triangle-alert-DfGGrt7q.js";import"./dollar-sign-CqZmt_ZI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"flex justify-between items-center"},Z={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},ee={key:0,class:"mb-4 flex items-center justify-between bg-yellow-50 p-3 border border-yellow-200 rounded"},te={class:"flex gap-2"},se={class:"py-6 px-4 sm:px-6 lg:px-8"},le={class:"overflow-x-auto bg-white shadow rounded-xl"},ae={class:"min-w-full divide-y divide-gray-200"},oe={class:"bg-gray-50"},ie={class:"px-4 py-3"},de={class:"divide-y divide-gray-100"},ne={class:"px-6 py-3"},re=["value"],ue={class:"px-6 py-3 font-medium"},me={class:"px-4 py-3 capitalize"},pe={class:"px-4 py-3 text-sm"},ce={key:0,class:"text-xs text-gray-500"},fe={class:"px-4 py-3"},ve={class:"px-4 py-3"},ye={class:"text-xs text-gray-500"},_e={class:"px-4 py-3 text-right flex justify-end gap-2"},xe=["onClick"],ge=["onClick"],be={key:0},we={class:"p-6"},ke={class:"text-lg font-semibold mb-4"},he={class:"grid grid-cols-2 gap-4"},Ve={class:"flex gap-2"},Pe={key:0},Se={class:"grid grid-cols-2 gap-4"},Ce={class:"flex justify-end gap-3 mt-6"},Re={__name:"index",props:{packages:Object,counts:Object,filters:Object,pagination:Object},setup(b){const m=T(),S=b,_=x(null),p=x(!1);x(null),x("all");const n=x([]),s=A({name:"",price:"",duration_value:"",duration_unit:"days",type:"hotspot",upload_speed:"",download_speed:"",burst_limit:"",device_limit:""});function B(){_.value=null,s.reset(),s.type="hotspot",s.duration_unit="days",p.value=!0}function j(i){_.value=i.id,s.name=i.name,s.price=i.price,s.duration_value=i.duration_value,s.duration_unit=i.duration_unit||"days",s.type=i.type,s.upload_speed=i.upload_speed,s.download_speed=i.download_speed,s.burst_limit=i.burst_limit,s.device_limit=i.device_limit,p.value=!0}const w=x(!1);C(w,i=>{i?n.value=S.packages.map(e=>e.id):n.value=[]}),C(n,i=>{w.value=i.length===S.packages.length});const E=()=>{n.value.length&&confirm("Are you sure you want to delete selected packages?")&&P.delete(route("tenants.packages.bulk-delete"),{data:{ids:n.value},onSuccess:()=>{n.value=[],P.visit(route("tenants.packages.index"),{preserveScroll:!0}),m.success("package deleted succesfully")}})};function N(){const i={...s.data()};_.value?s.put(route("tenants.packages.update",_.value),{data:i,onSuccess:()=>{p.value=!1,m.success("Package updated successfully")},onError:()=>{m.error("Failed to update package")}}):s.post(route("tenants.packages.store"),{data:i,onSuccess:()=>{p.value=!1,m.success("Package created successfully")},onError:()=>{m.error("Failed to create package")}})}function F(i){confirm("Are you sure you want to delete this package?")&&P.delete(route("tenants.packages.destroy",i),{preserveScroll:!0,onSuccess:()=>{m.success("Package deleted successfully")},onError:()=>{m.error("Failed to delete package")}})}return(i,e)=>(c(),O(H,null,{header:f(()=>[t("div",Y,[t("h2",Z,[a(o(Q),{class:"w-6 h-6 text-blue-500"}),e[13]||(e[13]=v(" Internet Packages ",-1))]),a(M,{onClick:B,class:"flex items-center gap-2"},{default:f(()=>[a(o(R),{class:"w-4 h-4"}),e[14]||(e[14]=v(" Add Package ",-1))]),_:1})])]),default:f(()=>[n.value.length?(c(),g("div",ee,[t("div",te,[a($,{onClick:E},{default:f(()=>[v("Delete ("+d(n.value.length)+")",1)]),_:1})])])):k("",!0),t("div",se,[t("div",le,[t("table",ae,[t("thead",oe,[t("tr",null,[t("td",ie,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l)},null,512),[[U,w.value]])]),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600"},"Name",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600"},"Type",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600"},"Speed",-1)),e[18]||(e[18]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600"},"Price",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600"},"Duration",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-gray-600"},"Actions",-1))])]),t("tbody",de,[(c(!0),g(L,null,W(b.packages,l=>(c(),g("tr",{key:l.id,class:"hover:bg-gray-50 transition"},[t("td",ne,[h(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[1]||(e[1]=V=>n.value=V)},null,8,re),[[U,n.value]])]),t("td",ue,d(l.name),1),t("td",me,d(l.type),1),t("td",pe,[v(" Up: "+d(l.upload_speed)+" Mbps / Down: "+d(l.download_speed)+" Mbps ",1),l.burst_limit?(c(),g("div",ce," Burst: "+d(l.burst_limit)+" Mbps ",1)):k("",!0)]),t("td",fe,"Ksh "+d(l.price),1),t("td",ve,[v(d(l.duration_value)+" "+d(l.duration_unit)+" ",1),t("span",ye,"(~"+d(l.duration_in_days)+" days)",1)]),t("td",_e,[t("button",{class:"text-blue-500 hover:text-blue-700",onClick:V=>j(l)},[a(o(I),{class:"w-4 h-4"})],8,xe),t("button",{class:"text-red-500 hover:text-red-700",onClick:V=>F(l.id)},[a(o(X),{class:"w-4 h-4"})],8,ge)])]))),128)),b.packages.length===0?(c(),g("tr",be,[...e[21]||(e[21]=[t("td",{colspan:"7",class:"text-center text-sm text-gray-500 py-6"},"No packages available.",-1)])])):k("",!0)])])]),a(q,{links:b.pagination.links},null,8,["links"])]),a(K,{show:p.value,onClose:e[12]||(e[12]=l=>p.value=!1)},{default:f(()=>[t("div",we,[t("h3",ke,d(_.value?"Edit Package":"Create Package"),1),t("form",{onSubmit:z(N,["prevent"]),class:"space-y-4"},[t("div",null,[a(r,{for:"name",value:"Package Name"}),a(y,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).name=l),class:"mt-1 block w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.name,class:"mt-1"},null,8,["message"])]),t("div",he,[t("div",null,[a(r,{for:"price",value:"Price (KES)"}),a(y,{id:"price",modelValue:o(s).price,"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).price=l),type:"number",class:"mt-1 w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.price,class:"mt-1"},null,8,["message"])]),t("div",null,[a(r,{for:"duration",value:"Duration"}),t("div",Ve,[a(y,{id:"duration_value",modelValue:o(s).duration_value,"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).duration_value=l),type:"number",min:"1",class:"mt-1 w-1/2"},null,8,["modelValue"]),h(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o(s).duration_unit=l),class:"mt-1 w-1/2 border-gray-300 rounded-md"},[...e[22]||(e[22]=[t("option",{value:"hours"},"Hours",-1),t("option",{value:"days"},"Days",-1),t("option",{value:"weeks"},"Weeks",-1),t("option",{value:"months"},"Months",-1)])],512),[[D,o(s).duration_unit]])]),a(u,{message:o(s).errors.duration,class:"mt-1"},null,8,["message"])])]),t("div",null,[a(r,{for:"type",value:"Package Type"}),h(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>o(s).type=l),id:"type",class:"mt-1 w-full border-gray-300 rounded-md"},[...e[23]||(e[23]=[t("option",{value:"hotspot"},"Hotspot",-1),t("option",{value:"pppoe"},"PPPoE",-1),t("option",{value:"static"},"Static",-1)])],512),[[D,o(s).type]]),a(u,{message:o(s).errors.type,class:"mt-1"},null,8,["message"])]),o(s).type==="hotspot"?(c(),g("div",Pe,[a(r,{for:"device_limit",value:"Device Limit"}),a(y,{id:"device_limit",modelValue:o(s).device_limit,"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).device_limit=l),type:"number",class:"mt-1 w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.device_limit,class:"mt-1"},null,8,["message"])])):k("",!0),t("div",Se,[t("div",null,[a(r,{for:"upload_speed",value:"Upload Speed (Mbps)"}),a(y,{id:"upload_speed",modelValue:o(s).upload_speed,"onUpdate:modelValue":e[8]||(e[8]=l=>o(s).upload_speed=l),type:"number",class:"mt-1 w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.upload_speed,class:"mt-1"},null,8,["message"])]),t("div",null,[a(r,{for:"download_speed",value:"Download Speed (Mbps)"}),a(y,{id:"download_speed",modelValue:o(s).download_speed,"onUpdate:modelValue":e[9]||(e[9]=l=>o(s).download_speed=l),type:"number",class:"mt-1 w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.download_speed,class:"mt-1"},null,8,["message"])])]),t("div",null,[a(r,{for:"burst_limit",value:"Burst Limit (Optional)"}),a(y,{id:"burst_limit",modelValue:o(s).burst_limit,"onUpdate:modelValue":e[10]||(e[10]=l=>o(s).burst_limit=l),type:"number",class:"mt-1 w-full"},null,8,["modelValue"]),a(u,{message:o(s).errors.burst_limit,class:"mt-1"},null,8,["message"])]),t("div",Ce,[a($,{onClick:e[11]||(e[11]=l=>p.value=!1),type:"button"},{default:f(()=>[a(o(G),{class:"w-4 h-4 mr-1"}),e[24]||(e[24]=v(" Cancel ",-1))]),_:1}),a(M,{disabled:o(s).processing},{default:f(()=>[a(o(J),{class:"w-4 h-4 mr-1"}),v(" "+d(_.value?"Update":"Save"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1}))}};export{Re as default};
