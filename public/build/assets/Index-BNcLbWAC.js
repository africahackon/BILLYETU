import{i as u,o as l,d as i,t as o,j as N,q as L,c as g,a as d,b as s,e,h as O,l as r,f as v,F as w,m as p}from"./app-DQ1vlaC4.js";import{I as D,C as _,M as q,_ as U}from"./AuthenticatedLayout-CTmlqVjy.js";import{_ as a}from"./Card-BRVYY5Vw.js";import{T as P,_ as T}from"./ChartCard-C1rRZGsW.js";import{D as x}from"./dollar-sign-D5yBrcRU.js";import{C as h}from"./clock-BGYHf9J1.js";import{U as E,S as A,A as B,T as F,F as I,P as K}from"./users-DRAMVCud.js";import{c as C}from"./createLucideIcon-B_z4RiSM.js";import{X as k}from"./x-CsMTUfFl.js";import{C as f}from"./check-DpbPLkAY.js";import{C as M}from"./calendar-BKSUyMOB.js";import{C as R}from"./chart-no-axes-column-CU6-BO70.js";import"./useTheme-CZQL-PUu.js";import"./circle-check-big-DsdPW5IB.js";import"./triangle-alert-k_4De6-w.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=C("radio-tower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=C("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=C("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),V={class:"bg-white dark:bg-gray-800 shadow-sm rounded-xl p-6"},H={class:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},W={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},m={__name:"DashboardSection",props:{title:String},setup(t){return(S,b)=>(l(),u("section",V,[i("h2",H,o(t.title),1),i("div",W,[N(S.$slots,"default")])]))}},X={class:"p-6 space-y-6"},Y={class:"flex justify-between items-center mb-4"},z={key:0},J={class:"text-base font-bold text-indigo-700"},Q={key:0},Z={class:"bg-gradient-to-r from-green-100 to-blue-100 rounded-xl shadow-lg p-6 flex items-center justify-between mb-8"},tt={class:"text-3xl font-extrabold text-green-700"},et={class:"text-xs text-gray-500 mt-1"},st={class:"font-mono"},it={key:0,class:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 mb-8"},at={class:"flex items-center justify-between"},nt={class:"flex items-center space-x-4"},lt={class:"bg-white/20 rounded-full p-3"},ot={class:"text-blue-100"},ut={key:0},rt={class:"text-right"},ct={class:"text-3xl font-bold text-white"},dt={key:0},mt={key:4,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},vt={class:"flex items-center"},bt={class:"text-sm text-yellow-700"},yt={class:"grid gap-6",style:{"grid-template-columns":"repeat(auto-fit, minmax(320px, 1fr))"}},gt={class:"grid gap-6",style:{"grid-template-columns":"repeat(auto-fit, minmax(320px, 1fr))"}},xt={class:"bg-white rounded-lg shadow p-4 w-full min-w-[300px]!"},ht={class:"font-semibold text-blue-600 flex items-center gap-2 mb-2"},ft={class:"text-sm text-gray-500"},wt={class:"bg-white rounded-lg shadow p-4 w-full min-w-[300px]!"},kt={class:"font-semibold text-green-600 flex items-center gap-2 mb-2"},St={class:"text-sm text-gray-500"},pt={class:"bg-white rounded-lg shadow p-4 w-full min-w-[300px]!"},Tt={class:"font-semibold text-purple-600 flex items-center gap-2 mb-2"},Ct={class:"text-sm text-gray-500"},Dt={key:5,class:"flex justify-end gap-3 mt-8"},Pt=["href"],Et=["href"],Vt={__name:"Index",props:["stats"],setup(t){const S=t,b=L().props.auth.user;return console.log("Subscription data:",S.stats?.subscription),(()=>{const y=new Date().getHours();return y<12?"Good morning":y<18?"Good afternoon":"Good evening"})(),(y,n)=>(l(),g(U,null,{default:d(()=>[s(e(O),{title:"Tenant Dashboard"}),i("div",X,[i("div",Y,[i("div",null,[t.stats.subscription&&t.stats.subscription.current_period_days_remaining!==void 0?(l(),u("span",z,[n[2]||(n[2]=i("span",{class:"text-sm text-gray-700 font-semibold"},"Next subscription in:",-1)),i("span",J,[v(o(t.stats.subscription.current_period_days_remaining)+" days ",1),t.stats.subscription.current_period_hours_remaining!==void 0?(l(),u("span",Q,o(t.stats.subscription.current_period_hours_remaining)+" hours ",1)):r("",!0)])])):r("",!0)]),i("button",{class:"bg-gradient-to-r from-indigo-500 to-blue-600 text-white font-bold py-2 px-6 rounded-lg shadow hover:from-indigo-600 hover:to-blue-700 transition",onClick:n[0]||(n[0]=c=>y.$inertia.visit("/tenant/subscription/payment"))}," Pay Subscription ")]),i("div",Z,[i("div",null,[n[4]||(n[4]=i("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Account Balance",-1)),i("div",tt,"KES "+o(t.stats.account_balance??"0.00"),1),i("div",et,[n[3]||(n[3]=v("Wallet ID: ",-1)),i("span",st,o(t.stats.wallet_id||"Not Set"),1)])]),s(e(x),{class:"w-12 h-12 text-green-400"})]),t.stats.subscription&&t.stats.subscription.is_on_trial?(l(),u("div",it,[i("div",at,[i("div",nt,[i("div",lt,[s(e(h),{class:"w-8 h-8 text-white"})]),i("div",null,[n[6]||(n[6]=i("h2",{class:"text-xl font-bold text-white"},"Free Trial Active",-1)),i("p",ot,[v(o(t.stats.subscription.trial_days_remaining)+" days ",1),t.stats.subscription.trial_hours_remaining!==void 0?(l(),u("span",ut,o(t.stats.subscription.trial_hours_remaining)+" hours ",1)):r("",!0),n[5]||(n[5]=v(" remaining in your trial period ",-1))])])]),i("div",rt,[i("div",ct,[v(o(t.stats.subscription.trial_days_remaining)+" ",1),t.stats.subscription.trial_hours_remaining!==void 0?(l(),u("span",dt," ."+o(t.stats.subscription.trial_hours_remaining)+"h ",1)):r("",!0)]),n[7]||(n[7]=i("div",{class:"text-blue-100 text-sm"},"left",-1))])])])):r("",!0),s(m,{title:"Network Users"},{default:d(()=>[s(a,{title:"Total",value:t.stats.users.total,icon:e(E)},null,8,["value","icon"]),s(a,{title:"Hotspot",value:t.stats.users.hotspot,icon:e($)},null,8,["value","icon"]),s(a,{title:"PPPoE",value:t.stats.users.pppoe,icon:e(j)},null,8,["value","icon"]),s(a,{title:"Static",value:t.stats.users.static,icon:e(A)},null,8,["value","icon"]),s(a,{title:"Active",value:t.stats.users.active,icon:e(G)},null,8,["value","icon"]),s(a,{title:"Expired",value:t.stats.users.expired,icon:e(k)},null,8,["value","icon"])]),_:1}),s(m,{title:"Leads"},{default:d(()=>[s(a,{title:"Total",value:t.stats.leads.total,icon:e(D)},null,8,["value","icon"]),s(a,{title:"Pending",value:t.stats.leads.pending,icon:e(B)},null,8,["value","icon"]),s(a,{title:"Converted",value:t.stats.leads.converted,icon:e(f)},null,8,["value","icon"]),s(a,{title:"Lost",value:t.stats.leads.lost,icon:e(k)},null,8,["value","icon"])]),_:1}),s(m,{title:"Tickets"},{default:d(()=>[s(a,{title:"Open",value:t.stats.tickets.open,icon:e(F)},null,8,["value","icon"]),s(a,{title:"Closed",value:t.stats.tickets.closed,icon:e(f)},null,8,["value","icon"]),s(a,{title:"Assigned to Me",value:t.stats.tickets.assigned_to_me,icon:e(j)},null,8,["value","icon"])]),_:1}),s(m,{title:"MikroTik Devices"},{default:d(()=>[s(a,{title:"Total",value:t.stats.mikrotiks.total,icon:e($)},null,8,["value","icon"]),s(a,{title:"Connected",value:t.stats.mikrotiks.connected,icon:e(f)},null,8,["value","icon"]),s(a,{title:"Disconnected",value:t.stats.mikrotiks.disconnected,icon:e(k)},null,8,["value","icon"])]),_:1}),e(b).role==="admin"||e(b).role==="cashier"?(l(),g(m,{key:1,title:"Payments"},{default:d(()=>[s(a,{title:"Total Payments",value:t.stats.payments.count,icon:e(x)},null,8,["value","icon"]),s(a,{title:"Total Amount",value:`KES ${t.stats.payments.total_amount}`,icon:e(_)},null,8,["value","icon"]),t.stats.payments.latest?(l(),g(a,{key:0,title:"Latest Payment",value:`KES ${t.stats.payments.latest.amount}`,subtitle:t.stats.payments.latest.paid_at,icon:e(x)},null,8,["value","subtitle","icon"])):r("",!0),s(a,{title:"Pending Disbursements",value:t.stats.payments.pending_disbursement,icon:e(I)},null,8,["value","icon"])]),_:1})):r("",!0),e(b).role==="admin"||e(b).role==="cashier"?(l(),g(m,{key:2,title:"SMS"},{default:d(()=>[s(a,{title:"Total Sent",value:t.stats.sms.total_sent,icon:e(q)},null,8,["value","icon"]),s(a,{title:"This Month",value:t.stats.sms.sent_this_month,icon:e(P)},null,8,["value","icon"])]),_:1})):r("",!0),s(m,{title:"Packages"},{default:d(()=>[s(a,{title:"Total",value:t.stats.packages.total,icon:e(K)},null,8,["value","icon"]),s(a,{title:"Active",value:t.stats.packages.active,icon:e(f)},null,8,["value","icon"])]),_:1}),e(b).role==="admin"||e(b).role==="technician"?(l(),g(m,{key:3,title:"Equipment"},{default:d(()=>[s(a,{title:"Total Items",value:t.stats.equipment.total,icon:e(A)},null,8,["value","icon"]),s(a,{title:"Total Value",value:`KES ${t.stats.equipment.total_value}`,icon:e(x)},null,8,["value","icon"])]),_:1})):r("",!0),s(m,{title:"Subscription"},{default:d(()=>[t.stats.subscription?(l(),u(w,{key:0},[s(a,{title:"Status",value:t.stats.subscription.is_active?"Active":t.stats.subscription.is_on_trial?"Trial":"Expired",icon:t.stats.subscription.is_active?e(f):t.stats.subscription.is_on_trial?e(h):e(k)},null,8,["value","icon"]),t.stats.subscription.is_on_trial?(l(),g(a,{key:0,title:"Trial Days Remaining",value:t.stats.subscription.trial_days_remaining,icon:e(h)},null,8,["value","icon"])):r("",!0),t.stats.subscription.is_active?(l(),g(a,{key:1,title:"Days Remaining",value:t.stats.subscription.current_period_days_remaining,icon:e(M)},null,8,["value","icon"])):r("",!0),s(a,{title:"Next Billing",value:t.stats.subscription.next_billing_date?new Date(t.stats.subscription.next_billing_date).toLocaleDateString():"N/A",icon:e(M)},null,8,["value","icon"]),s(a,{title:"Amount",value:`KES ${t.stats.subscription.amount}`,icon:e(x)},null,8,["value","icon"]),s(a,{title:"Debug - Trial Ends",value:t.stats.subscription.trial_ends_at?new Date(t.stats.subscription.trial_ends_at).toLocaleDateString():"N/A",icon:e(h)},null,8,["value","icon"])],64)):r("",!0),n[8]||(n[8]=i("div",{class:"mt-4 flex justify-end"},[i("a",{href:"/subscription/payment",class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded shadow transition"},"Pay Subscription")],-1))]),_:1}),t.stats.subscription&&t.stats.subscription.is_on_trial&&t.stats.subscription.trial_days_remaining<=3?(l(),u("div",mt,[i("div",vt,[s(e(h),{class:"w-5 h-5 text-yellow-600 mr-2"}),i("div",null,[n[11]||(n[11]=i("h3",{class:"text-sm font-medium text-yellow-800"},"Trial Ending Soon",-1)),i("p",bt,[v(" Your trial period ends in "+o(t.stats.subscription.trial_days_remaining)+" days. ",1),n[9]||(n[9]=i("a",{href:"/subscription/payment",class:"underline hover:text-yellow-800"},"Renew now",-1)),n[10]||(n[10]=v(" to continue using our services. ",-1))])])])])):r("",!0),s(m,{title:"Analytics & Trends"},{default:d(()=>[i("div",yt,[s(T,{title:"User Type Distribution",labels:t.stats.user_distribution?Object.keys(t.stats.user_distribution):[],values:t.stats.user_distribution?Object.values(t.stats.user_distribution):[],type:"donut",icon:e(R),class:"w-full min-w-[300px]!"},null,8,["labels","values","icon"]),s(T,{title:"Monthly SMS Sent",labels:t.stats.sms_chart?Object.keys(t.stats.sms_chart):[],values:t.stats.sms_chart?Object.values(t.stats.sms_chart):[],type:"bar",icon:e(P),class:"w-full min-w-[300px]!"},null,8,["labels","values","icon"]),s(T,{title:"Payments Over Time",labels:t.stats.payments_chart?Object.keys(t.stats.payments_chart):[],values:t.stats.payments_chart?Object.values(t.stats.payments_chart):[],type:"line",icon:e(x),class:"w-full min-w-[300px]!"},null,8,["labels","values","icon"])])]),_:1}),s(m,{title:"Recent Activity"},{default:d(()=>[i("div",gt,[i("div",xt,[i("h3",ht,[s(e(E),{class:"w-5 h-5"}),n[12]||(n[12]=v(" New Users",-1))]),i("ul",ft,[(l(!0),u(w,null,p(t.stats.recent_activity.latest_users,c=>(l(),u("li",{key:c.username},o(c.username)+" - "+o(c.type),1))),128))])]),i("div",wt,[i("h3",kt,[s(e(x),{class:"w-5 h-5"}),n[13]||(n[13]=v(" Recent Payments",-1))]),i("ul",St,[(l(!0),u(w,null,p(t.stats.recent_activity.latest_payments,c=>(l(),u("li",{key:c.receipt_number}," KES "+o(c.amount)+" - "+o(c.paid_at),1))),128))])]),i("div",pt,[i("h3",Tt,[s(e(D),{class:"w-5 h-5"}),n[14]||(n[14]=v(" Latest Leads",-1))]),i("ul",Ct,[(l(!0),u(w,null,p(t.stats.recent_activity.latest_leads,c=>(l(),u("li",{key:c.name},o(c.name)+" - "+o(c.status),1))),128))])])])]),_:1}),e(b).role==="admin"?(l(),u("div",Dt,[i("button",{onClick:n[1]||(n[1]=c=>y.window.print()),class:"bg-blue-600 text-white px-4 py-2 rounded"},"Print"),i("a",{href:y.route("dashboard.export",{format:"excel"}),class:"bg-green-600 text-white px-4 py-2 rounded"},"Export Excel",8,Pt),i("a",{href:y.route("dashboard.export",{format:"pdf"}),class:"bg-red-600 text-white px-4 py-2 rounded"},"Export PDF",8,Et)])):r("",!0)])]),_:1}))}};export{Vt as default};
