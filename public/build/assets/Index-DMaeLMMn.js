import{B,r as m,u as E,w,c as S,o as x,a as i,i as h,l as U,d as s,b as l,f as p,t as c,k as D,y as A,F as z,m as P,n as N,g as F,e as d,z as $}from"./app-ClLsTfBs.js";import{_ as H}from"./AuthenticatedLayout-DWyS7Zsa.js";import{_ as v}from"./TextInput-DpWzOmuJ.js";import{_ as f}from"./InputLabel-EHnkv2Cb.js";import{_ as L}from"./SelectInput-D7rsc3j_.js";import{P as V}from"./PrimaryButton-D3d5Ywbw.js";import{_ as R}from"./Modal-np3oSQXU.js";import{D as C}from"./DangerButton-Ca0p5wN0.js";import{c as Z}from"./createLucideIcon-D8MMfvkc.js";import{P as G}from"./plus-DVlVQLub.js";import"./useTheme-Dj0zQ5aT.js";import"./users-DZA92Haw.js";import"./clock-BVty948m.js";import"./circle-check-big-LnCMj_bC.js";import"./triangle-alert-CdbVfkLU.js";import"./dollar-sign-DTSTT-pF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=Z("receipt-text",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]),K={class:"flex items-center justify-between"},Q={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},W={key:0,class:"mb-4 flex items-center justify-between bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-2 rounded"},X={class:"py-6"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ee={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},te={class:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},se={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},oe={class:"bg-gray-50 dark:bg-gray-700"},le={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},re={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ne={class:"px-6 py-4 whitespace-nowrap"},de=["value"],ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},fe={class:"relative px-6 py-4 flex gap-2"},ye={class:"mb-4"},ge={class:"mb-4"},xe={class:"mb-4"},ve={class:"mb-4"},ke={class:"mb-4"},_e={class:"mb-4"},be={class:"flex justify-end"},ze={__name:"Index",props:{auth:Object,invoices:Object,filters:Object,can:Object,flash:Object},setup(j){const u=B(),y=m(null);m(!1);const n=m([]),g=m(!1),r=j;m([]);const t=E({});w(()=>t.user_id,o=>{if(!o){t.package="",t.amount="";return}const e=r.users.find(a=>a.id===o);e&&e.package?(t.package=e.package.type||e.package.name||"",t.amount=e.package.price||e.package.amount||""):(t.package="",t.amount="")});function I(o=null){t.reset(),o?(y.value=!0,t.id=o.id,t.user=o.user,t.amount=o.amount,t.package=o.package,t.issued_on=o.issued_on,t.due_on=o.due_on,t.status=o.status):(y.value=!1,t.user="",t.amount="",t.package="",t.issued_on="",t.due_on="",t.status=""),_.value=!0}const _=m(!1);function k(){_.value=!1}function M(){y.value?t.put(route("tenant.invoices.update",t.id),{onSuccess:()=>{u.success("Invoice updated successfully."),k()},onError:()=>{u.error("There was an error updating the invoice.")}}):t.post(route("tenant.invoices.store"),{onSuccess:()=>{u.success("Invoice created successfully."),k()},onError:()=>{u.error("There was an error creating the invoice.")}})}const O=o=>{confirm("Are you sure you want to delete this invoice? This action cannot be undone.")&&t.delete(route("tenant.invoices.destroy",o.id),{onSuccess:()=>{u.success("Invoice deleted successfully.")},onError:()=>{u.error("There was an error deleting the invoice.")}})};function T(){n.value.length!==0&&confirm(`Are you sure you want to delete ${n.value.length} selected invoices?`)&&$.delete(route("tenant.invoices.bulk-destroy"),{data:{ids:n.value.map(o=>o.id)},preserveScroll:!0,onSuccess:()=>{n.value=[],g.value=!1,u.success("Selected invoices deleted successfully."),$.reload()},onError:()=>{u.error("There was an error deleting the selected invoices.")}})}function q(o){o.target.checked?n.value=r.invoices&&r.invoices.data?[...r.invoices.data]:[]:n.value=[]}return w(g,o=>{o?n.value=r.invoices&&r.invoices.data?[...r.invoices.data]:[]:n.value=[]}),w(n,o=>{g.value=r.invoices&&r.invoices.data&&o.length===r.invoices.data.length}),(o,e)=>(x(),S(H,null,{header:i(()=>[s("div",K,[s("h2",Q,[l(d(J),{class:"inline w-6 h-6 mr-2 text-cyan-700 dark:text-indigo-400"}),e[9]||(e[9]=p(" Invoices ",-1))]),r.can&&r.can.create_invoice?(x(),S(V,{key:0,onClick:e[0]||(e[0]=a=>I())},{default:i(()=>[l(d(G),{class:"w-5 h-5 mr-2"}),e[10]||(e[10]=p(" Create Invoice ",-1))]),_:1})):U("",!0)])]),default:i(()=>[n.value.length>0?(x(),h("div",W,[l(C,{onClick:T},{default:i(()=>[p(" Delete("+c(n.value.length)+") ",1)]),_:1})])):U("",!0),s("div",X,[s("div",Y,[s("div",ee,[s("div",te,[s("div",se,[s("table",ae,[s("thead",oe,[s("tr",null,[s("th",le,[D(s("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),onChange:q},null,544),[[A,g.value]])]),e[11]||(e[11]=s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Invoice #",-1)),e[12]||(e[12]=s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Customer",-1)),e[13]||(e[13]=s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Amount",-1)),e[14]||(e[14]=s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Due Date",-1)),e[15]||(e[15]=s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Status",-1)),e[16]||(e[16]=s("th",{scope:"col",class:"relative px-6 py-3"},[s("span",{class:"sr-only"},"Actions")],-1))])]),s("tbody",re,[(x(!0),h(z,null,P(r.invoices.data,a=>(x(),h("tr",{key:a.id,class:N({"bg-blue-50 dark:bg-blue-900":n.value.includes(a)})},[s("td",ne,[D(s("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[2]||(e[2]=b=>n.value=b)},null,8,de),[[A,n.value]])]),s("td",ie,c(a.invoice_number),1),s("td",ue,c(a.customer.name),1),s("td",ce,c(a.amount),1),s("td",pe,c(a.due_date),1),s("td",me,c(a.status),1),s("td",fe,[l(V,{size:"sm",onClick:b=>I(a)},{default:i(()=>[...e[17]||(e[17]=[p("Edit",-1)])]),_:1},8,["onClick"]),l(C,{size:"sm",onClick:b=>O(a)},{default:i(()=>[...e[18]||(e[18]=[p("Delete",-1)])]),_:1},8,["onClick"])])],2))),128))])])])])])])]),l(R,{show:_.value,onClose:k},{header:i(()=>[s("h3",null,c(y.value?"Edit Invoice":"Create Invoice"),1)]),default:i(()=>[s("form",{onSubmit:F(M,["prevent"])},[s("div",ye,[l(f,{for:"user_id",value:"Customer/User"}),l(L,{id:"user_id",modelValue:d(t).user_id,"onUpdate:modelValue":e[3]||(e[3]=a=>d(t).user_id=a),options:[{value:"",label:"Select a user"},...(Array.isArray(r.networkUsers)?r.networkUsers:[]).map(a=>({value:a.id,label:a.full_name}))],class:"mt-1 block w-full",required:""},null,8,["modelValue","options"])]),s("div",ge,[l(f,{for:"amount",value:"Amount"}),l(v,{id:"amount",modelValue:d(t).amount,"onUpdate:modelValue":e[4]||(e[4]=a=>d(t).amount=a),type:"number",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s("div",xe,[l(f,{for:"package",value:"Package"}),l(v,{id:"package",modelValue:d(t).package,"onUpdate:modelValue":e[5]||(e[5]=a=>d(t).package=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s("div",ve,[l(f,{for:"issued_on",value:"Issued On"}),l(v,{id:"issued_on",modelValue:d(t).issued_on,"onUpdate:modelValue":e[6]||(e[6]=a=>d(t).issued_on=a),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s("div",ke,[l(f,{for:"due_on",value:"Due On"}),l(v,{id:"due_on",modelValue:d(t).due_on,"onUpdate:modelValue":e[7]||(e[7]=a=>d(t).due_on=a),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s("div",_e,[l(f,{for:"status",value:"Status"}),l(v,{id:"status",modelValue:d(t).status,"onUpdate:modelValue":e[8]||(e[8]=a=>d(t).status=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s("div",be,[l(V,{type:"submit"},{default:i(()=>[p(c(y.value?"Update":"Create"),1)]),_:1}),l(C,{type:"button",class:"ml-2",onClick:k},{default:i(()=>[...e[19]||(e[19]=[p("Cancel",-1)])]),_:1})])],32)]),_:1},8,["show"])]),_:1}))}};export{ze as default};
