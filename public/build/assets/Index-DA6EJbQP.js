import{B as H,r as k,u as O,w as I,i as u,o as n,b as s,e as o,h as P,a as i,d as t,l as M,f as x,t as c,p as C,F as _,m as N,c as K,n as D,g as Y,k as G,M as J,z as b}from"./app-ClLsTfBs.js";import{_ as Q}from"./AuthenticatedLayout-DWyS7Zsa.js";import{_ as g}from"./TextInput-DpWzOmuJ.js";import{_ as m}from"./InputLabel-EHnkv2Cb.js";import{_ as p}from"./InputError-GgXdYZNG.js";import{P as S}from"./PrimaryButton-D3d5Ywbw.js";import{_ as U}from"./Checkbox-BSp4NqFJ.js";import{_ as R}from"./Modal-np3oSQXU.js";import{D as W}from"./DangerButton-Ca0p5wN0.js";import{c as j}from"./createLucideIcon-D8MMfvkc.js";import{E as X}from"./eye-4eRyOrcc.js";import"./useTheme-Dj0zQ5aT.js";import"./users-DZA92Haw.js";import"./clock-BVty948m.js";import"./circle-check-big-LnCMj_bC.js";import"./triangle-alert-CdbVfkLU.js";import"./dollar-sign-DTSTT-pF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=j("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=j("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ee={class:"flex items-center gap-3 text-3xl font-extrabold text-gray-800 leading-tight"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},le={class:"p-6 bg-white border-b border-gray-200"},oe={class:"flex justify-between items-center mb-6"},ae={key:0},re={class:"text-sm text-white"},ie={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-gray-50"},ue={class:"px-6 py-3"},ce={class:"bg-white divide-y divide-gray-200"},me={class:"px-6 py-4"},pe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},he={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},we=["onClick"],ke={key:0},_e={key:0,class:"mt-4 flex justify-end"},be=["innerHTML"],Ve=["innerHTML"],Me={class:"p-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se={class:"md:col-span-2 flex items-center mt-4"},Ue={class:"flex items-center justify-end mt-6"},Ge={__name:"Index",props:{vouchers:Object,voucherCount:Number,creating:{type:Boolean,default:!1},flash:Object},setup(f){const y=H(),v=f,h=k(!1);k(!!(v.flash?.success||v.flash?.error));const d=k([]),w=k(!1),B=()=>{w.value?d.value=v.vouchers.data.map(r=>r.id):d.value=[]},T=()=>{d.value.length!==0&&confirm("Are you sure you want to delete selected vouchers?")&&b.delete(route("tenants.vouchers.bulk-delete"),{data:{ids:d.value},preserveScroll:!0,onSuccess:()=>{d.value=[],w.value=!1,y.success("Vouchers deleted successfully")}})},E=r=>{confirm("Are you sure you want to delete this voucher?")&&b.delete(route("tenants.vouchers.destroy",r),{preserveScroll:!0,onSuccess:()=>{y.success("Voucher deleted successfully")}})},a=O({code:"",name:"",value:"",type:"fixed",usage_limit:"",expires_at:"",is_active:!0,note:""}),L=()=>{a.reset(),a.clearErrors()},V=()=>{h.value=!1,b.get(route("tenants.vouchers.index"),{},{replace:!0,preserveState:!0,preserveScroll:!0}),L()},$=()=>{a.post(route("tenants.vouchers.store"),{onSuccess:()=>{V(),y.success("Voucher created successfully")},onError:()=>{y.error("Failed to create, check your form")},onFinish:()=>{}})},z=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";I(()=>v.creating,r=>{r?(L(),h.value=!0):h.value=!1},{immediate:!0});const q=()=>{b.get(route("tenants.vouchers.index",{create:!0}),{preserveScroll:!0,preserveState:!0})};return(r,e)=>(n(),u(_,null,[s(o(P),{title:"Vouchers"}),s(Q,null,{header:i(()=>[t("div",ee,[s(o(Z),{class:"w-7 h-7 gap-3 flex text-blue-600"}),e[9]||(e[9]=x(" Vouchers ",-1))])]),default:i(()=>[t("div",te,[t("div",se,[t("div",le,[t("div",oe,[d.value.length>0?(n(),u("div",ae,[s(S,{class:"bg-red-900",onClick:T},{default:i(()=>[s(o(F),{class:"w-5 h-5 text-red-600"}),t("span",null,[e[10]||(e[10]=x("Bulk Delete ",-1)),t("span",re,"("+c(d.value.length)+")",1)])]),_:1})])):M("",!0),s(o(C),{href:r.route("tenants.vouchers.create")},{default:i(()=>[s(S,{class:"bg-green-500 hover:bg-green-700",onClick:q},{default:i(()=>[...e[11]||(e[11]=[x(" New Voucher ",-1)])]),_:1})]),_:1},8,["href"])]),t("div",ie,[t("table",ne,[t("thead",de,[t("tr",null,[t("th",ue,[s(U,{checked:w.value,"onUpdate:checked":e[0]||(e[0]=l=>w.value=l),onChange:B},null,8,["checked"])]),e[12]||(e[12]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Code",-1)),e[13]||(e[13]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value",-1)),e[14]||(e[14]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type",-1)),e[15]||(e[15]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Usage Limit",-1)),e[16]||(e[16]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expires At",-1)),e[17]||(e[17]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Active",-1)),e[18]||(e[18]=t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")],-1))])]),t("tbody",ce,[(n(!0),u(_,null,N(f.vouchers.data,l=>(n(),u("tr",{key:l.id},[t("td",me,[s(U,{value:l.id,checked:d.value,"onUpdate:checked":e[1]||(e[1]=A=>d.value=A)},null,8,["value","checked"])]),t("td",pe,c(l.code),1),t("td",fe,c(l.value),1),t("td",xe,c(l.type),1),t("td",ge,c(l.usage_limit||"Unlimited"),1),t("td",ye,c(z(l.expires_at)),1),t("td",ve,c(l.is_active?"Yes":"No"),1),t("td",he,[s(o(C),{href:r.route("tenants.vouchers.show",l.id),class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:i(()=>[s(o(X),{class:"m-5 h-5 inline-block align-middle"})]),_:1},8,["href"]),t("button",{onClick:A=>E(l.id),class:"text-red-600 hover:text-red-900"},[s(o(F),{class:"w-5 h-5 inline-block align-middle"})],8,we)])]))),128)),f.vouchers.data.length===0?(n(),u("tr",ke,[...e[19]||(e[19]=[t("td",{colspan:"8",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No vouchers found. ",-1)])])):M("",!0)])])]),f.vouchers.total>f.vouchers.per_page?(n(),u("div",_e,[(n(!0),u(_,null,N(f.vouchers.links,l=>(n(),u(_,{key:l.label},[l.url?(n(),K(o(C),{key:0,href:l.url,class:D(["px-4 py-2 text-sm leading-5 font-medium rounded-md focus:outline-none transition ease-in-out duration-150",{"bg-indigo-600 text-white":l.active,"text-gray-700 hover:bg-gray-200":!l.active}])},{default:i(()=>[t("span",{innerHTML:l.label},null,8,be)]),_:2},1032,["href","class"])):(n(),u("span",{key:1,class:"px-4 py-2 text-sm leading-5 font-medium rounded-md text-gray-400 cursor-not-allowed",innerHTML:l.label},null,8,Ve))],64))),128))])):M("",!0)])])]),s(R,{show:h.value,onClose:V},{default:i(()=>[t("div",Me,[e[26]||(e[26]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Create New Voucher",-1)),t("form",{onSubmit:Y($,["prevent"])},[t("div",Ce,[t("div",null,[s(m,{for:"code",value:"Voucher Code"}),s(g,{id:"code",type:"text",class:"mt-1 block w-full",modelValue:o(a).code,"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).code=l),required:"",autofocus:""},null,8,["modelValue"]),s(p,{class:"mt-2",message:o(a).errors.code},null,8,["message"])]),t("div",null,[s(m,{for:"name",value:"Voucher Name"}),s(g,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o(a).name,"onUpdate:modelValue":e[3]||(e[3]=l=>o(a).name=l),required:""},null,8,["modelValue"]),s(p,{class:"mt-2",message:o(a).errors.name},null,8,["message"])]),t("div",null,[s(m,{for:"value",value:"Value"}),s(g,{id:"value",type:"number",step:"0.01",class:"mt-1 block w-full",modelValue:o(a).value,"onUpdate:modelValue":e[4]||(e[4]=l=>o(a).value=l),required:""},null,8,["modelValue"]),s(p,{class:"mt-2",message:o(a).errors.value},null,8,["message"])]),t("div",null,[s(m,{for:"type",value:"Type"}),G(t("select",{id:"type","onUpdate:modelValue":e[5]||(e[5]=l=>o(a).type=l),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[...e[20]||(e[20]=[t("option",{value:"fixed"},"Fixed Amount (e.g., KES 100)",-1),t("option",{value:"percentage"},"Percentage (e.g., 10%)",-1)])],512),[[J,o(a).type]]),s(p,{class:"mt-2",message:o(a).errors.type},null,8,["message"])]),t("div",null,[s(m,{for:"usage_limit",value:"Usage Limit (Optional)"}),s(g,{id:"usage_limit",type:"number",class:"mt-1 block w-full",modelValue:o(a).usage_limit,"onUpdate:modelValue":e[6]||(e[6]=l=>o(a).usage_limit=l),min:"1"},null,8,["modelValue"]),s(p,{class:"mt-2",message:o(a).errors.usage_limit},null,8,["message"]),e[21]||(e[21]=t("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty for unlimited usage.",-1))]),t("div",null,[s(m,{for:"expires_at",value:"Expires At (Optional)"}),s(g,{id:"expires_at",type:"date",class:"mt-1 block w-full",modelValue:o(a).expires_at,"onUpdate:modelValue":e[7]||(e[7]=l=>o(a).expires_at=l)},null,8,["modelValue"]),s(p,{class:"mt-2",message:o(a).errors.expires_at},null,8,["message"]),e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 mt-1"},"Leave empty for no expiry date.",-1))]),t("div",Se,[s(U,{id:"is_active",checked:o(a).is_active,"onUpdate:checked":e[8]||(e[8]=l=>o(a).is_active=l)},null,8,["checked"]),s(m,{for:"is_active",class:"ml-2"},{default:i(()=>[...e[23]||(e[23]=[x("Is Active",-1)])]),_:1}),s(p,{class:"mt-2",message:o(a).errors.is_active},null,8,["message"])])]),t("div",Ue,[s(W,{type:"button",onClick:V,class:"mr-4"},{default:i(()=>[...e[24]||(e[24]=[x(" Cancel ",-1)])]),_:1}),s(S,{class:D({"opacity-25":o(a).processing}),disabled:o(a).processing},{default:i(()=>[...e[25]||(e[25]=[x(" Create Voucher ",-1)])]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{Ge as default};
