import{B as I,r as k,u as A,w as G,z as w,s as J,c as K,o as d,a as m,d as e,b as o,i as u,l as C,F as V,m as P,n as E,t as n,f as _,k as S,y as Q,e as a,p as R,g as W,M as j}from"./app-B-oWgorL.js";import{_ as X}from"./AuthenticatedLayout-DQmTMAKG.js";import{_ as B}from"./Modal-rL_D16Y4.js";import{_ as c}from"./InputLabel-Qc75SLBk.js";import{_ as y}from"./TextInput-CHdG8hXy.js";import{P as $}from"./PrimaryButton-JAsWR8mt.js";import{D}from"./DangerButton-C9Y_aHkz.js";import{_ as x}from"./InputError-DjJ0vloF.js";import{_ as Y}from"./Pagination-DdDL4nx1.js";import{c as N}from"./createLucideIcon-676DDOdB.js";import"./useTheme-BqXCrGo_.js";import"./users-UbsQP_5p.js";import"./clock-Ceb6M1qm.js";import"./circle-check-big-BLJy3Tqw.js";import"./triangle-alert-BrKQhPAh.js";import"./dollar-sign-DBGEH5tI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=N("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=N("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),te={class:"flex justify-between items-center"},se={class:"text-2xl font-semibold text-gray-800 flex items-center gap-2"},le={class:"py-6 px-4 sm:px-6 lg:px-8"},oe={class:"flex gap-4 mb-4"},ae=["onClick"],ne={key:0,class:"mb-4 flex items-center justify-between bg-yellow-50 p-3 border border-yellow-200 rounded"},ie={class:"flex gap-2"},re={class:"overflow-x-auto bg-white shadow rounded-xl"},de={class:"min-w-full divide-y divide-gray-200"},ue={class:"bg-gray-100"},me={class:"px-4 py-3"},pe=["checked"],ce={class:"divide-y divide-gray-100"},xe={class:"px-4 py-3"},fe=["value"],ve={class:"px-6 py-3 font-medium"},ge={class:"font-bold text-gray-900"},ye={class:"text-sm text-gray-600"},be={class:"px-4 py-3 font-mono text-xs text-gray-700"},ke={key:0},_e={key:1},he={class:"px-4 py-3"},we={class:"px-4 py-3"},Ue={class:"px-4 py-3"},Ce={class:"px-4 py-3"},Ve={class:"px-4 py-3 text-right flex justify-end gap-2"},Pe={class:"relative inline-block text-left"},Se=["onClick"],$e={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},Ae={class:"py-1"},Ee=["onClick"],je=["onClick"],Be=["onClick"],De={key:0},Ne={class:"p-6"},Fe={class:"text-lg font-semibold mb-4"},Me=["value"],Oe={class:"flex justify-end gap-3 mt-6"},Le={class:"bg-gradient-to-r from-cyan-100 to-violet-100 rounded-lg shadow-xl p-6 max-w-2xl mx-auto space-y-6"},Te={class:"bg-indigo-200 rounded-md border p-4"},qe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-800"},ze={class:"font-mono text-green-700"},He={key:0,class:"text-xs text-gray-500"},Ie={class:"flex items-center space-x-2"},Ge={class:"font-mono text-red-600"},Je={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700"},Ke={class:"inline-block px-2 py-1 text-xs font-semibold rounded bg-blue-100 text-blue-800"},Qe={class:"flex justify-end pt-4"},pt={__name:"index",props:{users:Object,filters:Object,counts:Object,packages:Object},setup(v){const h=I(),F=v,b=k(!1),g=k(null),r=k(null),U=k("all"),l=A({full_name:"",username:"",password:"",phone:"",email:"",location:"",package_id:"",type:"hotspot",expires_at:""});G(U,i=>{w.get(route("tenants.users.index"),{type:i},{preserveScroll:!0})});function M(){g.value=null,l.reset(),l.type="hotspot",b.value=!0}k([]),A({ids:[]});function O(i){g.value=i.id,l.full_name=i.full_name??"",l.username=i.username??"",l.password="",l.phone=i.phone??"",l.email=i.email??"",l.location=i.location??"",l.package_id=i.package_id??"",l.type=i.type??"hotspot",l.expires_at=i.expires_at?i.expires_at.slice(0,16):"",b.value=!0}function L(){const i={onSuccess:()=>{b.value=!1,w.reload({only:["users"],preserveScroll:!0}),h.success(g.value?"User updated successfully":"User created successfully")},onError:()=>{h.error("Something went wrong. Please check the form.")}};g.value?l.put(route("tenants.users.update",g.value),i):l.post(route("tenants.users.store"),i)}function T(i){confirm("Are you sure you want to delete this User?")&&w.delete(route("tenants.users.destroy",i),{preserveScroll:!0,onSuccess:()=>{h.success("User deleted successfully")},onError:()=>{h.error("Failed to delete user")}})}const p=k([]),q=()=>{p.value.length&&confirm("Delete selected Users?")&&w.delete(route("tenants.users.bulk-delete"),{data:{ids:p.value},onSuccess:()=>{p.value=[],w.visit(route("tenants.users.index"),{preserveScroll:!0,preserveState:!1}),h.success("Users successfully deleted")}})};function z(i){r.value=i}const H=J(()=>F.packages[l.type]||[]);return(i,t)=>(d(),K(X,null,{header:m(()=>[e("div",te,[e("h2",se,[o(a(Z),{class:"w-6 h-6 text-blue-600"}),t[15]||(t[15]=_(" Users ",-1))]),o($,{onClick:M,class:"flex items-center bg-green-700 gap-2"},{default:m(()=>[o(a(ee),{class:"w-4 h-4"}),t[16]||(t[16]=_(" Add User ",-1))]),_:1})])]),default:m(()=>[e("div",le,[e("div",oe,[(d(),u(V,null,P(["all","hotspot","pppoe","static"],s=>e("button",{key:s,onClick:f=>U.value=s,class:E(["px-4 py-1 rounded-full border",{"bg-blue-600 text-white":U.value===s,"bg-white text-gray-800 border-gray-300":U.value!==s}])},n(s.charAt(0).toUpperCase()+s.slice(1))+" ("+n(v.counts[s]||0)+") ",11,ae)),64))]),p.value.length?(d(),u("div",ne,[e("div",ie,[o(D,{onClick:q},{default:m(()=>[_("Delete ("+n(p.value.length)+")",1)]),_:1})])])):C("",!0),e("div",re,[e("table",de,[e("thead",ue,[e("tr",null,[e("th",me,[e("input",{type:"checkbox",checked:p.value.length===v.users.data.length,onChange:t[0]||(t[0]=s=>p.value=s.target.checked?v.users.data.map(f=>f.id):[])},null,40,pe)]),t[17]||(t[17]=e("th",{class:"px-6 py-3 text-left text-sm font-semibold text-gray-700"}," Username ",-1)),t[18]||(t[18]=e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-700"}," Account No ",-1)),t[19]||(t[19]=e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-700"}," Phone ",-1)),t[20]||(t[20]=e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-700"}," Package ",-1)),t[21]||(t[21]=e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-700"}," Expiry ",-1)),t[22]||(t[22]=e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-700"}," Status ",-1)),t[23]||(t[23]=e("th",{class:"px-4 py-3 text-right text-sm font-semibold text-gray-700"}," Actions ",-1))])]),e("tbody",ce,[(d(!0),u(V,null,P(v.users.data,s=>(d(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",xe,[S(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[1]||(t[1]=f=>p.value=f)},null,8,fe),[[Q,p.value]])]),e("td",ve,[o(a(R),{href:i.route("tenants.users.show",s.id),class:"block"},{default:m(()=>[e("div",ge,n(s.username),1),e("div",ye,n(s.full_name),1)]),_:2},1032,["href"])]),e("td",be,[s.account_number?(d(),u("span",ke,n(s.account_number?.substring(0,10)),1)):(d(),u("span",_e,"—"))]),e("td",he,n(s.phone),1),e("td",we,n(s.package?.name||"-"),1),e("td",Ue,n(s.expiry_human),1),e("td",Ce,[e("span",{class:E(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",s.is_online?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"])},n(s.is_online?"Online":"Offline"),3)]),e("td",Ve,[e("div",Pe,[e("button",{onClick:f=>s.showActions=!s.showActions,class:"text-gray-500 hover:text-gray-700 focus:outline-none"},[...t[24]||(t[24]=[e("span",{class:"sr-only"},"Open actions",-1),e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"1.5"}),e("circle",{cx:"19.5",cy:"12",r:"1.5"}),e("circle",{cx:"4.5",cy:"12",r:"1.5"})],-1)])],8,Se),s.showActions?(d(),u("div",$e,[e("div",Ae,[e("button",{onClick:f=>{z(s),s.showActions=!1},class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," View ",8,Ee),e("button",{onClick:f=>{O(s),s.showActions=!1},class:"block w-full text-left px-4 py-2 text-sm text-blue-700 hover:bg-blue-50"}," Edit ",8,je),e("button",{onClick:f=>{T(s.id),s.showActions=!1},class:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50"}," Delete ",8,Be)])])):C("",!0)])])]))),128)),v.users.data.length===0?(d(),u("tr",De,[...t[25]||(t[25]=[e("td",{colspan:"6",class:"text-center text-gray-500 py-6"}," No users found. ",-1)])])):C("",!0)])]),o(Y,{class:"mt-4",links:v.users.links},null,8,["links"])])]),o(B,{show:b.value,onClose:t[12]||(t[12]=s=>b.value=!1)},{default:m(()=>[e("div",Ne,[e("h3",Fe,n(g.value?"Edit User":"Create User"),1),e("form",{onSubmit:W(L,["prevent"]),class:"space-y-4"},[e("div",null,[o(c,{for:"full_name",value:"Full Name"}),o(y,{modelValue:a(l).full_name,"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).full_name=s),id:"full_name",class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.full_name},null,8,["message"])]),e("div",null,[o(c,{for:"username",value:"Username"}),o(y,{modelValue:a(l).username,"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).username=s),id:"username",class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.username},null,8,["message"])]),e("div",null,[o(c,{for:"password",value:"Password"}),o(y,{modelValue:a(l).password,"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).password=s),id:"password",class:"mt-1 block w-full",type:"text",autocomplete:"off"},null,8,["modelValue"]),o(x,{message:a(l).errors.password},null,8,["message"])]),e("div",null,[o(c,{for:"phone",value:"Phone"}),o(y,{modelValue:a(l).phone,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).phone=s),id:"phone",class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.phone},null,8,["message"])]),e("div",null,[o(c,{for:"email",value:"Email"}),o(y,{modelValue:a(l).email,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).email=s),id:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.email},null,8,["message"])]),e("div",null,[o(c,{for:"location",value:"Location"}),o(y,{modelValue:a(l).location,"onUpdate:modelValue":t[7]||(t[7]=s=>a(l).location=s),id:"location",class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.location},null,8,["message"])]),e("div",null,[o(c,{for:"expires_at",value:"Expiry Date"}),o(y,{id:"expires_at",type:"datetime-local",modelValue:a(l).expires_at,"onUpdate:modelValue":t[8]||(t[8]=s=>a(l).expires_at=s),class:"mt-1 block w-full"},null,8,["modelValue"]),o(x,{message:a(l).errors.expires_at},null,8,["message"])]),e("div",null,[o(c,{for:"type",value:"User Type"}),S(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>a(l).type=s),id:"type",class:"mt-1 w-full border-gray-300 rounded-md"},[...t[26]||(t[26]=[e("option",{value:"hotspot"},"Hotspot",-1),e("option",{value:"pppoe"},"PPPoE",-1),e("option",{value:"static"},"Static",-1)])],512),[[j,a(l).type]]),o(x,{message:a(l).errors.type},null,8,["message"])]),e("div",null,[o(c,{for:"package_id",value:"Package"}),S(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>a(l).package_id=s),id:"package_id",class:"mt-1 w-full border-gray-300 rounded-md"},[(d(!0),u(V,null,P(H.value,s=>(d(),u("option",{key:s.id,value:s.id},n(s.name),9,Me))),128))],512),[[j,a(l).package_id]]),o(x,{message:a(l).errors.package_id},null,8,["message"])]),e("div",Oe,[o(D,{onClick:t[11]||(t[11]=s=>b.value=!1),type:"button"},{default:m(()=>[...t[27]||(t[27]=[_("Cancel",-1)])]),_:1}),o($,{disabled:a(l).processing},{default:m(()=>[_(n(g.value?"Update":"Save"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),o(B,{show:r.value,onClose:t[14]||(t[14]=s=>r.value=null)},{default:m(()=>[e("div",Le,[t[39]||(t[39]=e("div",{class:"text-center"},[e("h2",{class:"text-2xl font-bold text-gray-800"}," User Profile "),e("p",{class:"text-sm text-gray-500 mt-1"}," Complete access details for client configuration ")],-1)),e("div",Te,[t[30]||(t[30]=e("h3",{class:"text-sm font-semibold text-blue-700 mb-2"}," Login Credentials ",-1)),e("div",qe,[e("div",null,[t[28]||(t[28]=e("span",{class:"text-blue-700"},"Username:",-1)),e("div",ze,n(r.value?.username),1),r.value?.account_number?(d(),u("div",He," Account No: "+n(r.value?.account_number.substring(0,6)),1)):C("",!0)]),e("div",null,[t[29]||(t[29]=e("span",{class:"text-blue-700"},"Password:",-1)),e("div",Ie,[e("span",Ge,n(r.value?.password),1)])])])]),e("div",Je,[e("div",null,[t[31]||(t[31]=e("span",{class:"font-semibold text-black"},"Full Name:",-1)),e("p",null,n(r.value?.full_name),1)]),e("div",null,[t[32]||(t[32]=e("span",{class:"font-semibold text-black"},"Phone:",-1)),e("p",null,n(r.value?.phone),1)]),e("div",null,[t[33]||(t[33]=e("span",{class:"font-semibold text-black"},"Email:",-1)),e("p",null,n(r.value?.email||"—"),1)]),e("div",null,[t[34]||(t[34]=e("span",{class:"font-semibold text-black"},"Location:",-1)),e("p",null,n(r.value?.location||"—"),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"font-semibold text-black"},"Package:",-1)),e("p",null,n(r.value?.package?.name||"—"),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"font-semibold text-black"},"Type:",-1)),e("span",Ke,n(r.value?.type),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"font-semibold text-black"},"Expiry:",-1)),e("p",null,n(r.value?.expiry_human),1)])]),e("div",Qe,[o($,{onClick:t[13]||(t[13]=s=>r.value=null)},{default:m(()=>[...t[38]||(t[38]=[_("Close",-1)])]),_:1})])])]),_:1},8,["show"])]),_:1}))}};export{pt as default};
